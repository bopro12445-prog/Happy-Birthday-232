<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Forever Love ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #ff4d6d; --secondary: #ff85a1; }
        body { margin: 0; overflow: hidden; font-family: 'Quicksand', sans-serif; background: #0a0a0a; color: #fff; }
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        
        .glass-card {
            background: rgba(20, 20, 20, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
            display: none; opacity: 0; position: relative;
        }
        
        .glass-card.active { display: block; opacity: 1; z-index: 100; }
        .handwritten { font-family: 'Dancing Script', cursive; color: var(--secondary); text-shadow: 0 0 15px rgba(255, 133, 161, 0.5); }
        
        .btn-love {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white; padding: 14px 40px; border-radius: 100px;
            font-weight: bold; text-transform: uppercase; cursor: pointer; border: none;
            box-shadow: 0 10px 20px -5px rgba(255, 77, 109, 0.5);
            transition: all 0.3s ease;
        }
        .btn-love:hover { transform: scale(1.05); filter: brightness(1.1); }

        /* 3D Gallery Carousel */
        .carousel-view { perspective: 1000px; height: 250px; display: flex; justify-content: center; align-items: center; }
        .carousel-wheel { width: 150px; height: 200px; position: relative; transform-style: preserve-3d; }
        .carousel-item {
            position: absolute; width: 150px; height: 200px;
            border-radius: 15px; overflow: hidden; border: 2px solid var(--secondary);
            backface-visibility: hidden; box-shadow: 0 0 15px rgba(255, 77, 109, 0.3);
        }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; }

        /* Timer Units */
        .timer-unit { background: rgba(255, 77, 109, 0.1); padding: 10px; border-radius: 15px; min-width: 65px; border: 1px solid rgba(255, 133, 161, 0.3); }

        /* Giant LED Heart Finale */
        #led-heart {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 50; font-size: 40rem; color: rgba(255, 77, 109, 0.15);
            filter: blur(8px); display: none; pointer-events: none;
            text-shadow: 0 0 50px rgba(255, 77, 109, 0.8), 0 0 100px rgba(255, 77, 109, 0.4);
        }

        input {
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--secondary);
            color: white; padding: 12px; border-radius: 15px; text-align: center; outline: none;
        }

        .reason-card { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 20px; }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="DUONG_DAN_NHAC_CUA_BAN.mp3" type="audio/mpeg">
    </audio>

    <div id="led-heart">‚ù§Ô∏è</div>
    <div id="canvas-container"></div>

    <div id="app" class="flex items-center justify-center h-screen relative z-10 p-4">
        
        <div class="step glass-card active p-8 max-w-sm w-full text-center" id="step0" style="opacity: 1;">
            <div class="text-5xl mb-6">üîê</div>
            <h2 class="text-white text-xl font-bold mb-6">Nh·∫≠p m·∫≠t m√£ ƒë·ªÉ m·ªü qu√†...</h2>
            <input type="password" id="passInput" placeholder="8 con s·ªë n√®..." class="w-full mb-4">
            <p id="error-msg" class="text-red-400 text-sm hidden mb-4">Sai r·ªìi nha, th·ª≠ l·∫°i ƒëi b√© iu! üå∏</p>
            <button class="btn-love w-full" id="btn-unlock">X√°c nh·∫≠n ‚ù§Ô∏è</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step1">
            <div class="handwritten text-5xl mb-6">Ch√†o c√¥ng ch√∫a...</div>
            <p class="text-gray-300 text-lg mb-8">H√¥m nay l√† m·ªôt ng√†y c·ª±c k·ª≥ ƒë·∫∑c bi·ªát, anh c√≥ ƒëi·ªÅu n√†y mu·ªën n√≥i v·ªõi em.</p>
            <button class="btn-love" id="btn-1">Xem ƒë√≥ l√† g√¨ nh√© ‚ù§Ô∏è</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step2">
            <h2 class="text-4xl font-bold text-white mb-6">Happy Birthday! üéÇ</h2>
            <p class="text-pink-300 text-xl font-medium mb-4">C√¥ g√°i 12/01/2006</p>
            <p class="text-gray-400 mb-8 italic">"C·∫£m ∆°n em v√¨ ƒë√£ l√† m·ªôt ph·∫ßn tuy·ªát v·ªùi nh·∫•t trong cu·ªôc ƒë·ªùi anh."</p>
            <button class="btn-love" id="btn-2">Ti·∫øp t·ª•c ‚ú®</button>
        </div>

        <div class="step glass-card p-8 max-w-2xl w-full text-center" id="step3">
            <h2 class="text-3xl font-bold mb-8 text-pink-400">V√¨ sao em tuy·ªát v·ªùi?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="reason-card">
                    <div class="text-3xl mb-2">‚ú®</div>
                    <h3 class="text-lg font-bold text-white">S·ª± t·ª≠ t·∫ø</h3>
                    <p class="text-sm text-gray-400">Tr√°i tim ·∫•m √°p c·ªßa em lu√¥n khi·∫øn anh t·ª± h√†o.</p>
                </div>
                <div class="reason-card">
                    <div class="text-3xl mb-2">üòä</div>
                    <h3 class="text-lg font-bold text-white">N·ª• c∆∞·ªùi</h3>
                    <p class="text-sm text-gray-400">N·ª• c∆∞·ªùi t·ªèa n·∫Øng gi√∫p anh xua tan m·ªçi m·ªát m·ªèi.</p>
                </div>
                <div class="reason-card">
                    <div class="text-3xl mb-2">üåü</div>
                    <h3 class="text-lg font-bold text-white">NƒÉng l∆∞·ª£ng</h3>
                    <p class="text-sm text-gray-400">S·ª± nhi·ªát huy·∫øt c·ªßa em truy·ªÅn c·∫£m h·ª©ng cho anh.</p>
                </div>
            </div>
            <button class="btn-love" id="btn-3">M·ªôt ƒëi·ªÅu b·∫•t ng·ªù n·ªØa...</button>
        </div>

        <div class="step glass-card p-8 max-w-2xl w-full text-center" id="step-gallery">
            <h2 class="handwritten text-4xl mb-6 text-pink-300">Em lu√¥n xinh ƒë·∫πp nh·∫•t...</h2>
            <div class="carousel-view mb-10">
                <div class="carousel-wheel" id="carousel-wheel">
                    <div class="carousel-item"><img src="anh1.jpg"></div>
                    <div class="carousel-item"><img src="anh2.jpg"></div>
                    <div class="carousel-item"><img src="anh3.jpg"></div>
                    <div class="carousel-item"><img src="anh4.jpg"></div>
                    <div class="carousel-item"><img src="anh5.jpg"></div>
                    <div class="carousel-item"><img src="anh6.jpg"></div>
                </div>
            </div>
            <button class="btn-love" id="btn-to-timer">V√† ch√∫ng m√¨nh... ‚ù§Ô∏è</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step-timer">
            <h2 class="text-2xl font-bold text-white mb-6">Th·ªùi gian ch√∫ng m√¨nh b√™n nhau ‚ù§Ô∏è</h2>
            <div class="w-48 h-48 mx-auto mb-8 rounded-full overflow-hidden border-4 border-pink-400 shadow-2xl">
                <img src="anh_nam_tay.jpg" class="w-full h-full object-cover">
            </div>
            <div id="timer" class="flex justify-around text-white font-bold mb-8">
                <div class="timer-unit"><span id="days" class="text-2xl block text-pink-400">00</span><small>Ng√†y</small></div>
                <div class="timer-unit"><span id="hours" class="text-2xl block text-pink-400">00</span><small>Gi·ªù</small></div>
                <div class="timer-unit"><span id="mins" class="text-2xl block text-pink-400">00</span><small>Ph√∫t</small></div>
                <div class="timer-unit"><span id="secs" class="text-2xl block text-pink-400">00</span><small>Gi√¢y</small></div>
            </div>
            <button class="btn-love" id="btn-4">M·ªôt ƒëi·ªÅu cu·ªëi c√πng...</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step4">
            <div class="handwritten text-4xl mb-6">G·ª≠i em...</div>
            <div id="typing-text" class="text-white text-xl leading-relaxed min-h-[100px]"></div>
            <button class="btn-love mt-8" id="final-btn" style="display: none;">Nh·∫≠n qu√† n√®! ‚ù§Ô∏è</button>
        </div>

        <div id="rabbit-gift" style="position: fixed; bottom: -400px; left: 50%; transform: translateX(-50%); z-index: 200; text-align: center; transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
            <img id="rabbit-img" 
                 src="https://media.giphy.com/media/VeMhxrpfpux7cKyQ4g/giphy.gif" 
                 alt="Cute Fuzzballs" class="mx-auto w-52 filter drop-shadow-2xl">
            <div class="bg-white text-pink-500 font-bold py-2 px-6 rounded-full shadow-2xl mt-4 inline-block border-2 border-pink-200">
                Chocolate cho baby c·ªßa anh ! üç´
            </div>
        </div>

    <script>
        // 1. BACKGROUND HEART ANIMATION (THREE.JS)
        const scene = new THREE.
